---
layout: post
title: 깃허브 파일을 다른 레포지토리로 이동시키는 방법
---

깃허브에서 파일을 다른 레포지토리로 이동시키는 방법에는 여러 가지가 있습니다. 각 방법은 상황에 따라 다르게 적용할 수 있으며, 커밋 히스토리를 유지하거나 단순히 파일만 이동할 수 있습니다. 다음은 몇 가지 주요 방법입니다:

### 1. 커밋 히스토리를 유지하지 않고 파일 이동하기

가장 간단한 방법은 파일을 단순히 복사하여 새 레포지토리에 붙여넣는 것입니다. 그러나 이 경우 커밋 히스토리는 유지되지 않습니다.

1. 기존 레포지토리에서 파일을 로컬로 복사합니다.
2. 새 레포지토리에 파일을 붙여넣고 커밋합니다.

### 2. 커밋 히스토리를 유지하며 파일 이동하기

커밋 히스토리를 유지하면서 파일을 이동하려면 조금 더 복잡한 방법을 사용해야 합니다.

1. 기존 레포지토리에서 파일을 필터링하여 새 브랜치를 생성합니다.
2. 새 브랜치를 새 레포지토리로 푸시합니다.
3. 새 레포지토리에서 브랜치를 병합합니다.

다음은 세부 단계입니다:

1. **기존 레포지토리에서 파일 필터링하기**:
    
    ```
    git clone <기존_레포지토리_URL> temp-repo
    cd temp-repo
    git checkout --orphan feature-branch
    git reset
    git add <이동할_파일_또는_디렉토리>
    git commit -m "Moving selected files to new repository"
    ```
    
2. **새 레포지토리로 푸시하기**:
    
    ```
    git remote add new-repo <새_레포지토리_URL>
    git push new-repo feature-branch
    ```
    
3. **새 레포지토리에서 병합하기**:
    
    ```
    cd <새_레포지토리_폴더>
    git fetch origin
    git checkout -b feature-branch origin/feature-branch
    git merge feature-branch
    git branch -d feature-branch
    ```
    

이 방법을 통해 커밋 히스토리를 유지하면서 파일을 다른 레포지토리로 이동시킬 수 있습니다.

[참조 medium](https://medium.com/@ayushya/move-directory-from-one-repository-to-another-preserving-git-history-d210fa049d4b)

[참조 blog.billyc](https://blog.billyc.io/how-to-copy-one-or-more-files-from-one-git-repo-to-another-and-keep-the-git-history/)

### 3. GitHub 웹 인터페이스를 이용하여 파일 이동하기

GitHub 웹 인터페이스를 통해 파일을 이동하는 방법도 있습니다. 이 방법은 소규모 파일 이동 시 유용하게 사용할 수 있습니다.

1. 이동할 파일의 현재 위치로 이동하여 "Edit this file"을 클릭합니다.
2. 파일 경로를 변경한 후 커밋 메시지를 작성하고 "Commit changes"를 클릭합니다.
    
    [참조 docs.github](https://docs.github.com/en/repositories/working-with-files/managing-files/moving-a-file-to-a-new-location)
    
    [참조 stackoverflow](https://stackoverflow.com/questions/66734687/move-files-into-a-folder-in-github-at-their-website)
    

이 방법들을 사용하면 필요에 따라 깃허브의 파일을 다른 레포지토리로 효율적으로 이동할 수 있습니다.

---

다중 리포지토리 프로젝트 구조에서는 한 프로젝트에서 다른 프로젝트로 일부 파일을 리팩터링하는 것은 시간 문제일 뿐입니다.
현재 [Instamojo.com](https://instamojo.medium.com/)에서는 큰 리포지토리를 여러 개의 작은 하위 프로젝트로 분할하기 시작하는 시점에 도달했습니다. 단순히 한 리포지토리에서 다른 리포지토리로 파일을 옮기려고 하면 특정 파일의 전체 히스토리가 손실되어 더 이상 추적할 수 없게 됩니다. 변경내용 기록이 있는 파일을 다른 리포지토리로 옮기려면 다음 단계가 필요합니다:

# **리포지토리 A에서 파일 이동 준비하기**

**1단계:** 

리포지토리 A의 사본을 만드십시오. 다음 단계에서는 이 사본에 큰 변경 사항이 있으므로 푸시하지 마십시오!

```
mkdir cloneA
cd cloneA

git clone --branch <branch> --origin origin --progress \
  -v <git repository A url>
# eg. git clone --branch master --origin origin --progress \
#   -v https://github.com/username/myproject.git

# (assuming myprojects is the repository you want to copy from)
# (myprojects가 복사하려는 저장소라고 가정)
```

**2단계:** 

해당 디렉토리로 이동합니다.

```
cd <git repository A directory>
#  eg. cd myproject
# Folder Path is ~/cloneA/myproject
# 폴더 경로는 ~/cloneA/myproject입니다.
```

**3단계:** 

실수로 원격 변경(예: 푸시)을 방지하려면 원본 저장소에 대한 링크를 삭제하세요.

```
git remote rm origin

```

**4단계:** 

기록과 파일을 살펴보고 `FOLDER_TO_KEEP`에 없는 항목을 모두 삭제하세요. 그 결과 `FOLDER_TO_KEEP`의 내용이 A 저장소의 베이스로 쏟아져 나옵니다.

```
git filter-branch --subdirectory-filter <directory> -- --all

# eg. git filter-branch --subdirectory-filter subfolder1/subfolder2/FOLDER_TO_KEEP -- --all
```

**5단계:** 

원하지 않는 데이터를 정리합니다.

```
git reset --hard
git gc --aggressive 
git prune
git clean -fd
```

**6단계:** 

모든 파일과 디렉터리를 리포지토리 B로 푸시하려는 NEW_FOLDER로 옮깁니다.

```
mkdir <base directory>  # 기본 디렉토리
#eg mkdir NEW_FOLDER

mv * <base directory>   # 기본 디렉토리

#eg mv * NEW_FOLDER
```

또는 GUI를 사용하여 모든 파일과 디렉터리를 `NEW_FOLDER`로 드래그할 수 있습니다.

**7단계:** 

변경 사항을 추가하고 커밋합니다.

```
git add .
git commit
```

# **파일을 새 리포지토리 B에 병합합니다.**

**1단계:** 

아직 리포지토리 B가 없는 경우 리포지토리 B의 사본을 만드세요.

```
mkdir cloneB
cd cloneB

git clone <git repository B url>
# eg. git clone 
https://github.com/username/newproject.git
```

**2단계:** 

해당 디렉토리로 이동합니다.

```
cd <git repository B directory>
#  eg. cd newproject
# Folder Path is ~/cloneB/newproject
# 폴더 경로는 ~/cloneB/newproject입니다.
```

**3단계:** 

리포지토리 B의 브랜치로 리포지토리 A에 원격 연결을 만듭니다.

*저장소 B* 의 브랜치로 *저장소 A* 에 대한 원격 연결을 만듭니다 .

```
git remote add repo-A <git repository A directory>
# (repo-A can be anything - it's just a random name)
# (repo-A는 무엇이든 될 수 있습니다. 그냥 임의의 이름일 뿐입니다.)

# eg. git remote add repo-A ~/cloneA/myproject
```

**4단계:** 

이 브랜치(이동하려는 디렉터리만 포함)의 파일과 기록을 리포지토리 B로 가져옵니다.

```
git pull repo-A master --allow-unrelated-histories
# This merges master from repository A into repository B
# 리포지토리 A의 마스터를 리포지토리 B로 병합합니다.
```

**5단계:** 

리포지토리 A에 대한 원격 연결을 제거합니다.

```
git remote rm repo-A
```

**6단계:** 

마지막으로 변경 사항을 푸시합니다.

```
git push
```

복제된 리포지토리를 모두 삭제할 수 있습니다. 

이제 변경 내역이 있는 파일 변경 내용을 리포지토리 B에서 온라인으로 사용할 수 있습니다.

